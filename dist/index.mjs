import{ref as h,inject as A,unref as L}from"vue";var p=Symbol("i18n"),b="";function j(n,r=""){let t=new Map,o=/\s*\|\s*/g;for(let a in n){let c=r?`${r}.${a}`:a,i=n[a];if(typeof i=="string")t.set(c,i.replace(o,b));else if(Array.isArray(i))t.set(c,i.join(b));else if(typeof i=="object"&&i!==null){let g=j(i,c);for(let[P,u]of g)t.set(P,u)}}return t}function w(n){let r=new Map;return n.forEach((t,o)=>{t.includes(b)&&r.set(o,t.split(b).map(a=>a.trim()))}),r}function E(n){let r=new Map;for(let t in $)r.set(t,$[t]);if(!n)return r;for(let t in n)r.set(t,n[t]);return r}var $={zh:()=>0,"zh-CN":()=>0,"zh-TW":()=>0,en:n=>n===1?0:1,ja:()=>0,ko:()=>0,fr:n=>n===0||n===1?0:1,de:n=>n===1?0:1,es:n=>n===1?0:1,ru:n=>{let r=n%10,t=n%100;return r===1&&t!==11?0:r>=2&&r<=4&&(t<10||t>=20)?1:2},pl:n=>{if(n===1)return 0;let r=n%10,t=n%100;return r>=2&&r<=4&&(t<10||t>=20)?1:2},ar:n=>n===0?0:n===1?1:n===2?2:n%100>=3&&n%100<=10?3:n%100>=11&&n%100<=99?4:5};function v(n){let r=h(n.locale),t=n.messages,o=n.fallbackLocale,a=Object.keys(t),c=j(t),i=E(n.customPluralRules),g=w(c);function P(e,s){let l=g.get(`${r.value}.${e}`)??g.get(`${o}.${e}`);if(!l||l.length===0)return u(e);let R=(i.get(r.value)??i.get(o)??(x=>x===1?0:1))(Math.abs(s));return l[Math.min(R,l.length-1)]}function u(e){let s=c.get(`${r.value}.${e}`)??c.get(`${o}.${e}`);return typeof s<"u"?s:(n.missingWarn!==!1&&console.warn(`[i18n (nano)] Missing translation for key: ${e}`),e)}let M=/\{(\w+)\}/g;function I(e,s){if(!s)return e;let l=L(s);return e.replace(M,(m,R)=>R in l?String(l[R]):m)}function d(e,s){return I(u(e),s)}function y(e,s,l){return isNaN(s)&&(n.missingWarn!==!1&&console.warn("[i18n (nano)] Plural parameter is NaN"),s=1),I(P(e,s),l)}let f={t:d,tc:y,locale:r,availableLocales:a,messages:t,fallbackLocale:o};return Object.assign(f,{install(e){e.provide(p,f),n.globalInject!==!1&&(n.globalInjectPrefix?.length?(e.config.globalProperties[`$${n.globalInjectPrefix}T`]=d,e.config.globalProperties[`$${n.globalInjectPrefix}I18n`]=f,e.config.globalProperties[`$${n.globalInjectPrefix}Locale`]=r,e.config.globalProperties[`$${n.globalInjectPrefix}Tc`]=y):(e.config.globalProperties.$t=d,e.config.globalProperties.$i18n=f,e.config.globalProperties.$locale=r,e.config.globalProperties.$tc=y))}})}function z(){let n=A(p);if(!n)throw new Error("I18n (nano) instance not found. Did you forget to install the i18n plugin?");return n}export{v as createI18n,$ as defaultPluralRules,z as useI18n};
//# sourceMappingURL=index.mjs.map