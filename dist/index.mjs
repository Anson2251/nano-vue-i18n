import{ref as h,inject as k,unref as $}from"vue";var j=Symbol("i18n");function x(n,r=""){let t=new Map;for(let c in n){let b=r?`${r}.${c}`:c,o=n[c];if(typeof o=="string")t.set(b,o);else if(typeof o=="object"&&o!==null){let P=x(o,b);for(let[d,f]of P)t.set(d,f)}}return t}function w(n){let r=new Map;for(let t in p)r.set(t,p[t]);if(!n)return r;for(let t in n)r.set(t,n[t]);return r}var p={zh:()=>0,"zh-CN":()=>0,"zh-TW":()=>0,en:n=>n===1?0:1,ja:()=>0,ko:()=>0,fr:n=>n===0||n===1?0:1,de:n=>n===1?0:1,es:n=>n===1?0:1,ru:n=>{let r=n%10,t=n%100;return r===1&&t!==11?0:r>=2&&r<=4&&(t<10||t>=20)?1:2},pl:n=>{if(n===1)return 0;let r=n%10,t=n%100;return r>=2&&r<=4&&(t<10||t>=20)?1:2},ar:n=>n===0?0:n===1?1:n===2?2:n%100>=3&&n%100<=10?3:n%100>=11&&n%100<=99?4:5};function z(n){let r=h(n.locale),t=n.messages,c=n.fallbackLocale,b=Object.keys(t),o=x(t),P=w(n.customPluralRules);function d(e,s,i){let l=e.split(/\s*\|\s*/).map(u=>u.trim());if(l.length<=1)return e;let a=P.get(i);a||(a=P.get(c)??(u=>u===1?0:1));let g=a(Math.abs(s));return l[Math.min(g,l.length-1)]}function f(e){let s=o.get(`${r.value}.${e}`)??o.get(`${c}.${e}`);return typeof s<"u"?s:(n.missingWarn!==!1&&console.warn(`[i18n (nano)] Missing translation for key: ${e}`),e)}function M(e,s){let i=f(e);return d(i,s,r.value)}let m=/\{(\w+)\}/g;function y(e,s){let i=f(e);if(!s)return i;let l=$(s);return i=i.replace(m,(a,g)=>g in l?String(l[g]):a),i}function I(e,s,i){if(isNaN(s))return n.missingWarn!==!1&&console.warn("[i18n (nano)] Plural parameter is NaN"),f(e);let l=M(e,s);if(!i)return l;let a=$(i);return l.replace(m,(g,u)=>u in a?String(a[u]):g)}let R={t:y,tc:I,locale:r,availableLocales:b,messages:t,fallbackLocale:c};return Object.assign(R,{install(e){e.provide(j,R),n.globalInject!==!1&&(n.globalInjectPrefix?.length?(e.config.globalProperties[`$${n.globalInjectPrefix}T`]=y,e.config.globalProperties[`$${n.globalInjectPrefix}I18n`]=R,e.config.globalProperties[`$${n.globalInjectPrefix}Locale`]=r,e.config.globalProperties[`$${n.globalInjectPrefix}Tc`]=I):(e.config.globalProperties.$t=y,e.config.globalProperties.$i18n=R,e.config.globalProperties.$locale=r,e.config.globalProperties.$tc=I))}})}function T(){let n=k(j);if(!n)throw new Error("I18n (nano) instance not found. Did you forget to install the i18n plugin?");return n}export{z as createI18n,p as defaultPluralRules,T as useI18n};
//# sourceMappingURL=index.mjs.map