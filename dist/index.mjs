import{ref as A,inject as L,unref as j}from"vue";var x=Symbol("i18n"),d="";function h(n,e=""){let r=new Map,o=/\s*\|\s*/g;for(let a in n){let c=e?`${e}.${a}`:a,l=n[a];if(typeof l=="string")r.set(c,l.replace(o,d));else if(Array.isArray(l))r.set(c,l.join(d));else if(typeof l=="object"&&l!==null){let P=h(l,c);for(let[y,R]of P)r.set(y,R)}}return r}function w(n){let e=new Map;return n.forEach((r,o)=>{r.includes(d)&&e.set(o,r.split(d).map(a=>a.trim()))}),e}function E(n){let e=new Map;for(let r in M)e.set(r,M[r]);if(!n)return e;for(let r in n)e.set(r,n[r]);return e}var M={zh:()=>0,"zh-CN":()=>0,"zh-TW":()=>0,en:n=>n===1?0:1,ja:()=>0,ko:()=>0,fr:n=>n===0||n===1?0:1,de:n=>n===1?0:1,es:n=>n===1?0:1,ru:n=>{let e=n%10,r=n%100;return e===1&&r!==11?0:e>=2&&e<=4&&(r<10||r>=20)?1:2},pl:n=>{if(n===1)return 0;let e=n%10,r=n%100;return e>=2&&e<=4&&(r<10||r>=20)?1:2},ar:n=>n===0?0:n===1?1:n===2?2:n%100>=3&&n%100<=10?3:n%100>=11&&n%100<=99?4:5};function z(n){let e=A(n.locale),r=n.messages,o=n.fallbackLocale,a=Object.keys(r),c=h(r),l=E(n.customPluralRules),P=w(c);function y(t,i){let s=P.get(`${e.value}.${t}`)??P.get(`${o}.${t}`);if(!s)return R(t);if(s.length<=1)return t;let u=(l.get(e.value)??l.get(o)??(f=>f===1?0:1))(Math.abs(i));return s[Math.min(u,s.length-1)]}function R(t){let i=c.get(`${e.value}.${t}`)??c.get(`${o}.${t}`);return typeof i<"u"?i:(n.missingWarn!==!1&&console.warn(`[i18n (nano)] Missing translation for key: ${t}`),t)}let $=/\{(\w+)\}/g;function I(t,i){let s=R(t);if(!i)return s;let g=j(i);return s=s.replace($,(u,f)=>f in g?String(g[f]):u),s}function m(t,i,s){isNaN(i)&&(n.missingWarn!==!1&&console.warn("[i18n (nano)] Plural parameter is NaN"),i=1);let g=y(t,i);if(!s)return g;let u=j(s);return g.replace($,(f,p)=>p in u?String(u[p]):f)}let b={t:I,tc:m,locale:e,availableLocales:a,messages:r,fallbackLocale:o};return Object.assign(b,{install(t){t.provide(x,b),n.globalInject!==!1&&(n.globalInjectPrefix?.length?(t.config.globalProperties[`$${n.globalInjectPrefix}T`]=I,t.config.globalProperties[`$${n.globalInjectPrefix}I18n`]=b,t.config.globalProperties[`$${n.globalInjectPrefix}Locale`]=e,t.config.globalProperties[`$${n.globalInjectPrefix}Tc`]=m):(t.config.globalProperties.$t=I,t.config.globalProperties.$i18n=b,t.config.globalProperties.$locale=e,t.config.globalProperties.$tc=m))}})}function N(){let n=L(x);if(!n)throw new Error("I18n (nano) instance not found. Did you forget to install the i18n plugin?");return n}export{z as createI18n,M as defaultPluralRules,N as useI18n};
//# sourceMappingURL=index.mjs.map